class SlackRetriever {
    constructor(slack) {
        this.slack = slack;
    }

    getChannelHistory(channelName) {
        var self = this;
        return new Promise(function(resolve, reject) {
            self.slack.listChannels()
                .then(channelObject => {
                    var channel = channelObject.channels.find(chan => chan.name === channelName);
                    if(channel === undefined) {
                        reject("The channel \"" + channelName + "\" was not found.");
                    }
                    return channel.id;
                })
                .then(channelId => resolve(self.slack.getChannelHistory(channelId)));
        });
    }
}
module.exports = SlackRetriever;
